{"ast":null,"code":"var _jsxFileName = \"/Users/carlosalmagro/Desktop/react-chess-game/src/Components/Game/Chessboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport Tile from './Tile'; //import the tile component to push to board\n\nimport { pieces } from \"./PieceData\";\nimport { rule } from \"./Rules/Rule\";\nimport '../Style/Chessboard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Chessboard() {\n  _s();\n\n  const chessboardRef = useRef(null);\n  let chessboard = null;\n  let element = null;\n  let white_player = true;\n  const [piece, setPiece] = useState(pieces);\n  const [color, setColor] = useState(\"white\");\n  const [grabX, setGrabX] = useState(0);\n  const [grabY, setGrabY] = useState(0);\n\n  const activatePiece = e => {\n    element = e.target;\n    element.style.border = \"1px solid green\";\n  };\n\n  const grabPiece = function () {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : React.MouseEvent;\n    element = e.target;\n    chessboard = chessboardRef.current;\n\n    if (element.classList.contains(\"piece\") && chessboard) {\n      const x = e.clientX - 50;\n      const y = e.clinetY - 50;\n      setGrabX(Math.floor((e.clientX - chessboard.offsetLeft) / 100));\n      setGrabY(Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 800) / 100)));\n      element.style.position = \"absolute\";\n      element.style.top = `${y}px`;\n      element.style.left = `${x}px`;\n    }\n  };\n\n  const movePiece = function () {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : React.MouseEvent;\n    element = e.target;\n    chessboard = chessboardRef.current;\n\n    if (chessboard && element.classList.contains(\"piece\")) {\n      const x = e.clientX - 50;\n      const y = e.clientY - 50;\n      const minX = chessboard.offsetLeft - 40;\n      const minY = chessboard.offsetTop - 40;\n      const maxX = chessboard.offsetLeft + chessboard.clientWidth - 75;\n\n      if (x < minX) {\n        element.style.left = `${minX}px`;\n      } else if (x > maxX) {\n        element.style.left = `${maxX}px`;\n      } else {\n        element.style.left = `${x}px`;\n      }\n\n      element.style.top = `${y}px`;\n    }\n  };\n\n  const dropPiece = function () {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : React.MouseEvent;\n    element = e.target;\n    chessboard = chessboardRef.current;\n\n    if (element.classList.contains(\"piece\")) {\n      const x = e.clientX - 50;\n      const y = e.clientY - 50;\n      const dropX = Math.floor((e.clientX - chessboard.offsetLeft) / 100);\n      const dropY = Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 800) / 100));\n      setPiece(value => {\n        const piece = value.map(p => {\n          if (p.x === grabX && p.y === grabY && p.color === color) {\n            console.log(p.piece);\n            var s = rule(p.piece, p.y, dropY, p.x, dropX, p.color);\n            color === \"white\" ? setColor(\"black\") : setColor(\"white\");\n            console.log(color);\n\n            if (s) {\n              p.x = dropX;\n              p.y = dropY;\n            }\n          }\n\n          return p;\n        });\n        return piece;\n      });\n      element.style.position = \"static\";\n      element.style.removeProperty(\"top\");\n      element.style.removeProperty(\"left\");\n    }\n  }; //initilize the chessboard array\n\n\n  let board = []; //height and width of the board\n\n  let HEIGHT = 8;\n  let WIDTH = 8;\n\n  for (var i = HEIGHT - 1; i >= 0; --i) {\n    for (var j = 0; j < WIDTH; j++) {\n      let imageData = null;\n      let number = i + j + 2;\n      pieces.forEach(p => {\n        if (p.x === j && p.y === i) {\n          imageData = p.image;\n        }\n      });\n      board.push( /*#__PURE__*/_jsxDEV(Tile, {\n        image: imageData,\n        position: number\n      }, `${j}, ${i}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 24\n      }, this));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"chessboard\",\n    ref: chessboardRef,\n    onClick: activatePiece,\n    onMouseDown: grabPiece,\n    onMouseMove: movePiece,\n    onMouseUp: dropPiece,\n    children: board\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chessboard, \"9ekIASWspaIx1bjf+SpEgEqLQ9E=\");\n\n_c = Chessboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chessboard\");","map":{"version":3,"sources":["/Users/carlosalmagro/Desktop/react-chess-game/src/Components/Game/Chessboard.js"],"names":["React","useRef","useState","Tile","pieces","rule","Chessboard","chessboardRef","chessboard","element","white_player","piece","setPiece","color","setColor","grabX","setGrabX","grabY","setGrabY","activatePiece","e","target","style","border","grabPiece","MouseEvent","current","classList","contains","x","clientX","y","clinetY","Math","floor","offsetLeft","abs","ceil","clientY","offsetTop","position","top","left","movePiece","minX","minY","maxX","clientWidth","dropPiece","dropX","dropY","value","map","p","console","log","s","removeProperty","board","HEIGHT","WIDTH","i","j","imageData","number","forEach","image","push"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from 'react';\nimport Tile from './Tile'; //import the tile component to push to board\nimport {pieces} from \"./PieceData\";\nimport {rule} from \"./Rules/Rule\";\nimport '../Style/Chessboard.css';\nexport default function Chessboard ()\n{\n\n    const chessboardRef = useRef(null);  \nlet chessboard = null; let element = null;let white_player = true;\n    const [piece, setPiece] = useState(pieces);\n    const [color, setColor] = useState(\"white\");\n    const [grabX, setGrabX] = useState(0);\n    const [grabY, setGrabY] = useState(0);\n\n    const activatePiece = (e) =>\n    {\n        element = e.target;\n        element.style.border = \"1px solid green\";\n\n    }\n    \n    const grabPiece = (e = React.MouseEvent ) => {\n        element = e.target;\n        chessboard = chessboardRef.current;\n        if(element.classList.contains(\"piece\") && chessboard)\n        {\n            const x = e.clientX - 50;\n            const y = e.clinetY - 50;\n            setGrabX(Math.floor((e.clientX - chessboard.offsetLeft) / 100));\n            setGrabY(Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 800) / 100)));\n            \n            element.style.position = \"absolute\";\n            element.style.top = `${y}px`;\n            element.style.left = `${x}px`;\n            \n        }\n    }\n    const movePiece = (e = React.MouseEvent) => {\n        element = e.target;chessboard = chessboardRef.current;\n        if(chessboard && element.classList.contains(\"piece\"))\n        {\n            const x = e.clientX - 50;\n            const y = e.clientY - 50;\n            const minX = chessboard.offsetLeft - 40;\n            const minY = chessboard.offsetTop - 40;\n            const maxX = chessboard.offsetLeft + chessboard.clientWidth - 75;\n            \n            if(x < minX){element.style.left = `${minX}px`}\n            else if( x > maxX){element.style.left = `${maxX}px`;}\n            else{element.style.left = `${x}px`;}\n            \n\n            \n            element.style.top = `${y}px`;\n            \n           \n        }\n        \n    }\n    const dropPiece = (e = React.MouseEvent) => {\n\n            element = e.target;chessboard = chessboardRef.current;\n            if(element.classList.contains(\"piece\"))\n            {\n                \n                const x = e.clientX - 50;\n                const y = e.clientY - 50;\n                const dropX = Math.floor((e.clientX - chessboard.offsetLeft) / 100);\n                const dropY = Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 800) / 100));\n                \n                setPiece(value => {\n                    const piece = value.map(p => {\n                        \n                        \n                        if((p.x === grabX && p.y === grabY) && p.color === color)\n                        {\n                            \n                            console.log(p.piece);\n                            var s = rule(p.piece, p.y, dropY, p.x, dropX, p.color);\n                            color === \"white\" ? setColor(\"black\") : setColor(\"white\");\n                            console.log(color);\n                            if(s)\n                            {\n                                p.x = dropX;\n                                p.y = dropY; \n                                \n                            }\n                            \n                                                       \n                        }\n                        return p;\n                    \n                        \n                    });\n                    return piece;\n                    \n                    \n                })\n                element.style.position = \"static\";\n                element.style.removeProperty(\"top\");\n                element.style.removeProperty(\"left\");\n                \n                \n                \n            }\n            \n            \n        \n    }\n\n    //initilize the chessboard array\n    let board = [];\n    //height and width of the board\n    let HEIGHT = 8; let WIDTH = 8;\n\n    for(var i = HEIGHT - 1 ; i >= 0; --i)\n    {\n        for(var j = 0; j < WIDTH; j++)\n        {\n            let imageData = null;\n            let number = i + j + 2;\n            pieces.forEach(p => {\n                if(p.x === j && p.y === i)\n                {\n                    imageData = p.image;\n                }\n            });\n            board.push(<Tile key = {`${j}, ${i}`} image = {imageData} position = {number}/>)\n        }\n    }\n\n    return(\n        <div \n        id = \"chessboard\"\n        ref = {chessboardRef}\n        onClick = {activatePiece}\n        onMouseDown = {grabPiece}\n        onMouseMove = {movePiece}\n        onMouseUp = {dropPiece}\n\n            >\n            {board}\n\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}